<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>4. Splitting large queries â€¢ osmdata</title>
<!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="4. Splitting large queries">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">osmdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.5.025</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="../articles/osmdata.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/osmdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>4. Splitting large queries</h1>
                        <h4 data-toc-skip class="author">Mark
Padgham</h4>
                        <h4 data-toc-skip class="author">Martin
Machyna</h4>
            
            <h4 data-toc-skip class="date">2024-10-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/osmdata/blob/master/vignettes/query-split.Rmd" class="external-link"><code>vignettes/query-split.Rmd</code></a></small>
      <div class="d-none name"><code>query-split.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">1. Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>osmdata</code> package retrieves data from the <a href="https://overpass-api.de" class="external-link"><code>overpass</code> server</a> which is
primarily designed to deliver small subsets of the full Open Street Map
(OSM) data set, determined both by specific bounding coordinates and
specific OSM key-value pairs. The server has internal routines to limit
delivery rates on queries for excessively large data sets, and may
ultimately fail for large queries. This vignette describes one approach
for breaking overly large queries into a set of smaller queries, and for
re-combining the resulting data sets into a single <code>osmdata</code>
object reflecting the desired, large query.</p>
</div>
<div class="section level2">
<h2 id="query-splitting">2. Query splitting<a class="anchor" aria-label="anchor" href="#query-splitting"></a>
</h2>
<p>Complex or data-heavy queries may exhaust the time or memory limits
of the <code>overpass</code> server. One way to get around this problem
is to split the bounding box (bbox) of a query into several smaller
fragments, and then to re-combine the data and remove duplicate objects.
This section demonstrates how that may be done, starting with a large
bounding box.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span> <span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/osmdata/">osmdata</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">bb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getbb.html">getbb</a></span> <span class="op">(</span><span class="st">"Southeastern Connecticut COG"</span>, featuretype <span class="op">=</span> <span class="st">"boundary"</span><span class="op">)</span></span>
<span><span class="va">bb</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt;         min       max</span></span>
<span><span class="co">#&gt; x -72.46677 -71.79315</span></span>
<span><span class="co">#&gt; y  41.27591  41.75617</span></span></code></pre></div>
<p>The following lines then divide that bounding box into two smaller
areas:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dx</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">bb</span> <span class="op">[</span><span class="st">"x"</span>, <span class="st">"max"</span><span class="op">]</span> <span class="op">-</span> <span class="va">bb</span> <span class="op">[</span><span class="st">"x"</span>, <span class="st">"min"</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span></span>
<span></span>
<span><span class="va">bbs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="va">bb</span>, <span class="va">bb</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bbs</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">[</span><span class="st">"x"</span>, <span class="st">"max"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">bb</span> <span class="op">[</span><span class="st">"x"</span>, <span class="st">"max"</span><span class="op">]</span> <span class="op">-</span> <span class="va">dx</span></span>
<span><span class="va">bbs</span> <span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">[</span><span class="st">"x"</span>, <span class="st">"min"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">bb</span> <span class="op">[</span><span class="st">"x"</span>, <span class="st">"min"</span><span class="op">]</span> <span class="op">+</span> <span class="va">dx</span></span>
<span></span>
<span><span class="va">bbs</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;         min       max</span></span>
<span><span class="co">#&gt; x -72.46677 -72.12996</span></span>
<span><span class="co">#&gt; y  41.27591  41.75617</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt;         min       max</span></span>
<span><span class="co">#&gt; x -72.12996 -71.79315</span></span>
<span><span class="co">#&gt; y  41.27591  41.75617</span></span></code></pre></div>
<p>These two bounding boxes can then be used to submit two separate
overpass queries:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/opq.html">opq</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bbs</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/add_osm_feature.html">add_osm_feature</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"admin_level"</span>, value <span class="op">=</span> <span class="st">"8"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/osmdata_sf.html">osmdata_sf</a></span> <span class="op">(</span><span class="op">)</span></span>
<span><span class="va">res</span> <span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/opq.html">opq</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">bbs</span> <span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/add_osm_feature.html">add_osm_feature</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"admin_level"</span>, value <span class="op">=</span> <span class="st">"8"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/osmdata_sf.html">osmdata_sf</a></span> <span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The retrieved <code>osmdata</code> objects can then be merged using
the<code>c(...)</code> function, which automatically removes duplicate
objects.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="va">res</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">res</span> <span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="automatic-bbox-splitting">3. Automatic bbox splitting<a class="anchor" aria-label="anchor" href="#automatic-bbox-splitting"></a>
</h2>
<p>The previous code demonstrated how to divide a bounding box into two,
smaller regions. It will generally not be possible to know in advance
how small a bounding box should be for a query for work, and so we need
a more general version of that functionality to divide a bounding box
into a arbitrary number of sub-regions.</p>
<p>We can automate this process by monitoring the exit status of
<code>opq() |&gt; osmdata_sf()</code> and in case of a failed query we
can keep recursively splitting the current bounding box into
increasingly smaller fragments until the overpass server returns a
result. The following function demonstrates splitting a bounding box
into a list of four equal-sized bounding boxes in a 2-by-2 grid, each
box having a specified degree of overlap (<code>eps=0.05</code>, or 5%)
with the neighbouring box.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">split_bbox</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="va">bbox</span>, <span class="va">grid</span> <span class="op">=</span> <span class="fl">2</span>, <span class="va">eps</span> <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">xmin</span> <span class="op">&lt;-</span> <span class="va">bbox</span> <span class="op">[</span><span class="st">"x"</span>, <span class="st">"min"</span><span class="op">]</span></span>
<span>    <span class="va">ymin</span> <span class="op">&lt;-</span> <span class="va">bbox</span> <span class="op">[</span><span class="st">"y"</span>, <span class="st">"min"</span><span class="op">]</span></span>
<span>    <span class="va">dx</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">bbox</span> <span class="op">[</span><span class="st">"x"</span>, <span class="st">"max"</span><span class="op">]</span> <span class="op">-</span> <span class="va">bbox</span> <span class="op">[</span><span class="st">"x"</span>, <span class="st">"min"</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="va">grid</span></span>
<span>    <span class="va">dy</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">bbox</span> <span class="op">[</span><span class="st">"y"</span>, <span class="st">"max"</span><span class="op">]</span> <span class="op">-</span> <span class="va">bbox</span> <span class="op">[</span><span class="st">"y"</span>, <span class="st">"min"</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="va">grid</span></span>
<span></span>
<span>    <span class="va">bboxl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">grid</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">grid</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span></span>
<span>                <span class="va">xmin</span> <span class="op">+</span> <span class="op">(</span><span class="op">(</span><span class="va">i</span> <span class="op">-</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">eps</span><span class="op">)</span> <span class="op">*</span> <span class="va">dx</span><span class="op">)</span>,</span>
<span>                <span class="va">ymin</span> <span class="op">+</span> <span class="op">(</span><span class="op">(</span><span class="va">j</span> <span class="op">-</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">eps</span><span class="op">)</span> <span class="op">*</span> <span class="va">dy</span><span class="op">)</span>,</span>
<span>                <span class="va">xmin</span> <span class="op">+</span> <span class="op">(</span><span class="op">(</span><span class="va">i</span> <span class="op">+</span> <span class="va">eps</span><span class="op">)</span> <span class="op">*</span> <span class="va">dx</span><span class="op">)</span>,</span>
<span>                <span class="va">ymin</span> <span class="op">+</span> <span class="op">(</span><span class="op">(</span><span class="va">j</span> <span class="op">+</span> <span class="va">eps</span><span class="op">)</span> <span class="op">*</span> <span class="va">dy</span><span class="op">)</span></span>
<span>            <span class="op">)</span>,</span>
<span>            nrow <span class="op">=</span> <span class="fl">2</span>,</span>
<span>            dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames</a></span> <span class="op">(</span><span class="va">bbox</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span></span>
<span>            <span class="va">bboxl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span> <span class="op">(</span><span class="va">bboxl</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="va">b</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="va">bboxl</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We pre-split our area and create a queue of bounding boxes that we
will use for submitting queries.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getbb.html">getbb</a></span> <span class="op">(</span><span class="st">"Connecticut"</span>, featuretype <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">queue</span> <span class="op">&lt;-</span> <span class="fu">split_bbox</span> <span class="op">(</span><span class="va">bb</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Now we can create a loop that will monitor the exit status of our
query and in case of success remove the bounding box from the queue. If
our query fails for some reason, we split the failed bounding box into
four smaller fragments and add them to our queue, repeating until all
results have been successfully delivered.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">while</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span> <span class="op">(</span><span class="va">queue</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span> <span class="op">(</span><span class="va">queue</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">opres</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span>    <span class="va">opres</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span> <span class="op">(</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="../reference/opq.html">opq</a></span> <span class="op">(</span>bbox <span class="op">=</span> <span class="va">queue</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, timeout <span class="op">=</span> <span class="fl">25</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu"><a href="../reference/add_osm_feature.html">add_osm_feature</a></span> <span class="op">(</span>key <span class="op">=</span> <span class="st">"natural"</span>, value <span class="op">=</span> <span class="st">"tree"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu"><a href="../reference/osmdata_sf.html">osmdata_sf</a></span> <span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span> <span class="op">(</span><span class="va">opres</span><span class="op">)</span> <span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">!=</span> <span class="st">"try-error"</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span> <span class="op">(</span><span class="va">result</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="va">opres</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="va">queue</span> <span class="op">&lt;-</span> <span class="va">queue</span> <span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>        <span class="va">bboxnew</span> <span class="op">&lt;-</span> <span class="fu">split_bbox</span> <span class="op">(</span><span class="va">queue</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>        <span class="va">queue</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span> <span class="op">(</span><span class="va">bboxnew</span>, <span class="va">queue</span> <span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>All retrieved <code>osmdata</code> objects stored in the
<code>result</code> list can then be combined using the
<code>c(...)</code> operator. Note that for large datasets this process
can be quite time consuming.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">final</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span> <span class="op">(</span><span class="va">c</span>, <span class="va">result</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>





  </body>
</html>
