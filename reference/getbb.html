<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get bounding box for a given place name — getbb • osmdata</title><!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get bounding box for a given place name — getbb"><meta name="description" content="This function uses the free Nominatim API provided by OpenStreetMap to find
the bounding box (bb) associated with place names."><meta property="og:description" content="This function uses the free Nominatim API provided by OpenStreetMap to find
the bounding box (bb) associated with place names."><meta property="og:image" content="https://docs.ropensci.org/osmdata/logo.png"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css"><script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">osmdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.5.025</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="../articles/osmdata.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/osmdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get bounding box for a given place name</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/osmdata/blob/master/R/getbb.R" class="external-link"><code>R/getbb.R</code></a></small>
      <div class="d-none name"><code>getbb.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function uses the free Nominatim API provided by OpenStreetMap to find
the bounding box (bb) associated with place names.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getbb</span><span class="op">(</span></span>
<span>  <span class="va">place_name</span>,</span>
<span>  display_name_contains <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  viewbox <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  format_out <span class="op">=</span> <span class="st">"matrix"</span>,</span>
<span>  base_url <span class="op">=</span> <span class="st">"https://nominatim.openstreetmap.org"</span>,</span>
<span>  featuretype <span class="op">=</span> <span class="st">"settlement"</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  key <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-place-name">place_name<a class="anchor" aria-label="anchor" href="#arg-place-name"></a></dt>
<dd><p>The name of the place you're searching for</p></dd>


<dt id="arg-display-name-contains">display_name_contains<a class="anchor" aria-label="anchor" href="#arg-display-name-contains"></a></dt>
<dd><p>Text string to match with display_name field
returned by <a href="https://wiki.openstreetmap.org/wiki/Nominatim" class="external-link">https://wiki.openstreetmap.org/wiki/Nominatim</a></p></dd>


<dt id="arg-viewbox">viewbox<a class="anchor" aria-label="anchor" href="#arg-viewbox"></a></dt>
<dd><p>The bounds in which you're searching</p></dd>


<dt id="arg-format-out">format_out<a class="anchor" aria-label="anchor" href="#arg-format-out"></a></dt>
<dd><p>Character string indicating output format: <code>matrix</code>
(default), <code>string</code> (see <code><a href="bbox_to_string.html">bbox_to_string()</a></code>), <code>data.frame</code> (all 'hits' returned
by Nominatim), <code>sf_polygon</code> (for polygons that work with the sf package),
<code>polygon</code> (full polygonal bounding boxes for each match) or <code>osm_type_id</code> (
string for quering inside deffined OSM areas <code><a href="bbox_to_string.html">bbox_to_string()</a></code>).</p></dd>


<dt id="arg-base-url">base_url<a class="anchor" aria-label="anchor" href="#arg-base-url"></a></dt>
<dd><p>Base website from where data is queried</p></dd>


<dt id="arg-featuretype">featuretype<a class="anchor" aria-label="anchor" href="#arg-featuretype"></a></dt>
<dd><p>The type of OSM feature (settlement is default; see Note)</p></dd>


<dt id="arg-limit">limit<a class="anchor" aria-label="anchor" href="#arg-limit"></a></dt>
<dd><p>How many results should the API return?</p></dd>


<dt id="arg-key">key<a class="anchor" aria-label="anchor" href="#arg-key"></a></dt>
<dd><p>The API key to use for services that require it</p></dd>


<dt id="arg-silent">silent<a class="anchor" aria-label="anchor" href="#arg-silent"></a></dt>
<dd><p>Should the API be printed to screen? TRUE by default</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Defaults to a matrix in the form:
<code>
  min   max
x ...   ...
y ...   ...
</code></p>
<p>If <code>format_out = "polygon"</code>, one or more two-columns matrices of polygonal
longitude-latitude points. Where multiple <code>place_name</code> occurrences are found
within <code>nominatim</code>, each item of the list of coordinates may itself contain
multiple coordinate matrices where multiple exact matches exist. If one
exact match exists with potentially multiple polygonal boundaries (for
example, "london uk" is an exact match, but can mean either greater London or
the City of London), only the first is returned. See examples below for
illustration.</p>
<p>For <code>format_out = "osm_type_id"</code>, a character string representing an OSM object in overpass query
language. For example: <code>"relation(id:11747082)"</code> represents the area of
the Catalan Countries. If one exact match exists with potentially multiple
polygonal boundaries, only the first relation or way is returned. A set of
objects can also be represented for multiple results (e.g.
<code>relation(id:11747082,307833); way(id:22422490)</code>). See examples below for
illustration. The OSM objects that can be used as
<a href="https://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL#Map_way/relation_to_area_(map_to_area)" class="external-link">areas in overpass queries</a>
<em>must be closed rings</em> (ways or relations).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>It was inspired by the functions
<code>bbox</code> from the <span class="pkg">sp</span> package,
<code>bb</code> from the <span class="pkg">tmaptools</span> package and
<code>bb_lookup</code> from the github package <span class="pkg">nominatim</span> package,
which can be found at <a href="https://github.com/hrbrmstr/nominatim" class="external-link">https://github.com/hrbrmstr/nominatim</a>.</p>
<p>See <a href="https://wiki.openstreetmap.org/wiki/Nominatim" class="external-link">https://wiki.openstreetmap.org/wiki/Nominatim</a> for details.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Specific values of <code>featuretype</code> include "street", "city",
<a href="https://wiki.openstreetmap.org/wiki/Nominatim" class="external-link">https://wiki.openstreetmap.org/wiki/Nominatim</a> for details). The default
<code>featuretype = "settlement"</code> combines results from all intermediate
levels below "country" and above "streets". If the bounding box or polygon of
a city is desired, better results will usually be obtained with
<code>featuretype = "city"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other queries:
<code><a href="add_osm_feature.html">add_osm_feature</a>()</code>,
<code><a href="add_osm_features.html">add_osm_features</a>()</code>,
<code><a href="bbox_to_string.html">bbox_to_string</a>()</code>,
<code><a href="opq.html">opq</a>()</code>,
<code><a href="opq_around.html">opq_around</a>()</code>,
<code><a href="opq_csv.html">opq_csv</a>()</code>,
<code><a href="opq_enclosing.html">opq_enclosing</a>()</code>,
<code><a href="opq_osm_id.html">opq_osm_id</a>()</code>,
<code><a href="opq_string.html">opq_string</a>()</code>,
<code><a href="overpass_status.html">overpass_status</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">getbb</span> <span class="op">(</span><span class="st">"Salzburg"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># select based on display_name, print query url</span></span></span>
<span class="r-in"><span><span class="fu">getbb</span> <span class="op">(</span><span class="st">"Hereford"</span>, display_name_contains <span class="op">=</span> <span class="st">"United States"</span>, silent <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># top 3 matches as data frame</span></span></span>
<span class="r-in"><span><span class="fu">getbb</span> <span class="op">(</span><span class="st">"Hereford"</span>, format_out <span class="op">=</span> <span class="st">"data.frame"</span>, limit <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Examples of polygonal boundaries</span></span></span>
<span class="r-in"><span><span class="va">bb</span> <span class="op">&lt;-</span> <span class="fu">getbb</span> <span class="op">(</span><span class="st">"london uk"</span>, format_out <span class="op">=</span> <span class="st">"polygon"</span><span class="op">)</span> <span class="co"># single match</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span> <span class="op">(</span><span class="va">bb</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="co"># matrix of longitude/latitude pairs</span></span></span>
<span class="r-in"><span><span class="va">bb_sf</span> <span class="op">&lt;-</span> <span class="fu">getbb</span> <span class="op">(</span><span class="st">"kathmandu"</span>, format_out <span class="op">=</span> <span class="st">"sf_polygon"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># sf:::plot.sf(bb_sf) # can be plotted if sf is installed</span></span></span>
<span class="r-in"><span><span class="fu">getbb</span> <span class="op">(</span><span class="st">"london"</span>, format_out <span class="op">=</span> <span class="st">"sf_polygon"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">getbb</span> <span class="op">(</span><span class="st">"accra"</span>, format_out <span class="op">=</span> <span class="st">"sf_polygon"</span><span class="op">)</span> <span class="co"># rectangular bb</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">area</span> <span class="op">&lt;-</span> <span class="fu">getbb</span> <span class="op">(</span><span class="st">"València"</span>, format_out <span class="op">=</span> <span class="st">"osm_type_id"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># select multiple areas with format_out = "osm_type_id"</span></span></span>
<span class="r-in"><span><span class="va">areas</span> <span class="op">&lt;-</span> <span class="fu">getbb</span> <span class="op">(</span><span class="st">"València"</span>, format_out <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="bbox_to_string.html">bbox_to_string</a></span> <span class="op">(</span><span class="va">areas</span> <span class="op">[</span><span class="va">areas</span><span class="op">$</span><span class="va">osm_type</span> <span class="op">!=</span> <span class="st">"node"</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using an alternative service (locationiq requires an API key)</span></span></span>
<span class="r-in"><span><span class="co"># add LOCATIONIQ=type_your_api_key_here to .Renviron:</span></span></span>
<span class="r-in"><span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span> <span class="op">(</span><span class="st">"LOCATIONIQ"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span> <span class="op">(</span><span class="va">key</span><span class="op">)</span> <span class="op">==</span> <span class="fl">32</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu">getbb</span> <span class="op">(</span><span class="va">place_name</span>,</span></span>
<span class="r-in"><span>        base_url <span class="op">=</span> <span class="st">"https://locationiq.org/v1/search.php"</span>,</span></span>
<span class="r-in"><span>        key <span class="op">=</span> <span class="va">key</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>





  </body></html>

